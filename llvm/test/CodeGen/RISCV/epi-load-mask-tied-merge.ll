; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=riscv64 -mattr=+m,+a,+f,+d,+c,+experimental-v -o - < %s \
; RUN:     --verify-machineinstrs -epi-pipeline | FileCheck %s

define <vscale x 1 x double> @load_mask_tied_merge_operand(i64 %gvl, <vscale x 1 x i1> %vmask1, <vscale x 1 x i1> %vmask2, <vscale x 1 x double> %vmerge, double* nocapture readonly %c) nounwind {
; CHECK-LABEL: load_mask_tied_merge_operand:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    vmv1r.v v0, v8
; CHECK-NEXT:    vsetvli zero, a0, e64, m1, ta, mu
; CHECK-NEXT:    vle64.v v9, (a1), v0.t
; CHECK-NEXT:    vmv1r.v v8, v9
; CHECK-NEXT:    ret
entry:
  %0 = bitcast double* %c to <vscale x 1 x double>*
  %1 = tail call <vscale x 1 x double> @llvm.epi.vload.mask.nxv1f64.nxv1i1(<vscale x 1 x double> %vmerge, <vscale x 1 x double>* %0, <vscale x 1 x i1> %vmask2, i64 %gvl)
  ret <vscale x 1 x double> %1
}

; Function Attrs: nounwind readonly
declare <vscale x 1 x double> @llvm.epi.vload.mask.nxv1f64.nxv1i1(<vscale x 1 x double>, <vscale x 1 x double>* nocapture, <vscale x 1 x i1>, i64)
